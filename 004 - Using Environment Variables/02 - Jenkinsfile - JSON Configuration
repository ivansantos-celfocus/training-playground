pipeline {
	agent { 
		docker { 
			image 'alpine:latest' 
		}
	}
	environment { 
		BUILD_CONFIG = '[{ "name": "build name", "command": "command text" }, { "name": "build name 1", "command": "command text 1" }, { "name": "build name 2", "command": "command text 2" }]'
	}
	stages {
		stage('build') {
			steps {
				script {
					def buildConfigs = readJSON text: BUILD_CONFIG
					buildConfigs.each { buildConfig ->
						sh "echo '$buildConfig.name' && $buildConfig.command"	
					}
				}
			}
		}
	}
}
